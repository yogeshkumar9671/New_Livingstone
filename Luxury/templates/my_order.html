{% comment %} {% extends 'base.html' %} {% endcomment %}
{% load static %}
{% block title %}{% endblock title %}
{% block description %}{% endblock description %}
{% block keywords %}{% endblock keywords %}




{% block page_css %}

<link rel="stylesheet" href="{% static 'styles/bootstrap4/bootstrap.min.css' %}" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
<link href="{% static 'plugins/malihu-custom-scrollbar/jquery.mCustomScrollbar.css' %}" rel="stylesheet" type="text/css">
<link rel="stylesheet" type="text/css" href="{% static 'plugins/jquery-ui-1.12.1.custom/jquery-ui.css' %}">
<link rel="stylesheet" href="{% static 'styles/main_styles.css' %}" />
<link rel="stylesheet" href="{% static 'styles/responsive.css' %}" />

<!--Custom CSS-->
<link rel="stylesheet" href="{% static 'styles/orders.css' %}"> 

{% comment %} extra CSS for nav bar color according to page {% endcomment %}
<!-- <style>

  .pt-5, .py-5 {
    padding-top: 5rem !important;
}
.main_nav ul li a {
    color: #000;
  }
  .header {
    color: white;
    background: transparent; 
    position: fixed
  }
  .header.scrolled {
   color: black; 
}
.logo a {
  color: black;
}
.header.scrolled .logo a {
  color: black;
}
.header .burger_container div {
  background: black;
}
.burger_container:hover div
{
	background: #937c6f;
}




    .my-orders-page {
      font-family: 'Segoe UI', sans-serif;
      background: #f8f8f8;
      padding: 30px;
    }

    
@media (max-width: 480px) {
   .my-orders-page{
    padding: 0px;
  }

 
  
}

    .my-orders-page .container {
      background: white;
      padding: 20px;
      border-radius: 8px;
      margin: auto;
      box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
    }

    .my-orders-page h1 {
      margin-bottom: 5px;
    }

    .my-orders-page .subheading {
      color: #777;
      font-size: 14px;
    }

    .my-orders-page .order-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin: 20px 0;
    }

    .my-orders-page .order-header span {
      color: #1a73e8;
      background: #e8f0fe;
      padding: 5px 10px;
      border-radius: 5px;
    }

    .my-orders-page .track-btn {
      background: #ffa726;
      color: white;
      padding: 10px 20px;
      border: none;
      border-radius: 20px;
      font-weight: bold;
      cursor: pointer;
    }

    .my-orders-page .product {
      display: flex;
      align-items: center;
      margin-bottom: 20px;
      border-top: 1px solid #eee;
      padding-top: 20px;
    }

    .my-orders-page .product img {
      width: 80px;
      border-radius: 5px;
      margin-right: 20px;
    }

    .my-orders-page .details {
      flex: 1;
    }

    .my-orders-page .details h4 {
      margin: 0;
    }

    .my-orders-page .details .meta {
      color: #777;
      font-size: 14px;
    }

    .my-orders-page .details .price {
      font-weight: bold;
      margin-top: 10px;
    }

    .my-orders-page .status {
      text-align: right;
      font-size: 14px;
    }

    .my-orders-page .status span {
      color: #ffa726;
      font-weight: bold;
    }

    .my-orders-page .footer {
      border-top: 1px solid #eee;
      padding-top: 20px;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .my-orders-page .cancel-btn {
      background: transparent;
      border: none;
      color: #f44336;
      font-weight: bold;
      cursor: pointer;
    }

    .my-orders-page .total {
      font-weight: bold;
      font-size: 16px;
    }

    .my-orders-page .note {
      font-size: 13px;
      color: #777;
    }


</style> -->
<style>
    .progress{
        height: 10px;
        margin-bottom: 0px;
    }
    .detail {
        flex-wrap: nowrap;
        text-align: left;
        padding-left: 10px;
        box-sizing: border-box;
        overflow: hidden;
    }
    
    .detail>div {
        margin-top: 5px;
    }
    
    .company_logo {
        width: 20%;
        border: 3px solid rgba(1, 1, 66, 0.3);
        border-radius: 10px;
        font-weight: bolder;
    }
    
    .company_logo img {
        display: flex;
        width: 100%;
    }
    
    .brand_name {
        color: black;
        overflow: hidden;
        font-weight: bold;
    }
    
    .actual_price {
        color: gray;
        overflow: hidden;
    }
    
    .item {
        display: flex;
        justify-content: space-between;
    }
    
    .card_right {
        flex: 90%;
        padding-left: 20px;
    }
    #mobile{
        display: none;
    }
    #desktop{
        display: block;
    }
    @media screen and (max-width: 540px) {
        #mobile{
            display: block;
        }
        #desktop{
            display: none;
        }
        .card-body #card-body{
            padding-right: 10px;
            padding-left: 10px;
        }
        .col-sm-12.mb-4{
            padding-left: 0;
            padding-right: 0;
        }
        .col-sm-2.border-end{
            margin-bottom: 50px;
        }
        .balance1 {
        height: 0 !important;
        }

        .balance2 {
        height: 0 !important;
        }
        .container.my-5 {
            margin-top: 1rem !important;
            margin-bottom: 0rem !important;
        }
    }

    #card-body .card-body{
        /* box-shadow: 0px 3px 6px 2px black; */
    }

    @media screen and (max-width: 500px){
        .pagination-container {
            text-align: center!important;
            font-size: 11px;
        }
        .pagination-container .container div{
            text-align: center!important;
        }
    }
</style>

{% endblock page_css %}




{% block content %}

  <div class="my-orders-page">
  <div class="container">
    <h1>My Orders</h1>
    <p class="subheading">View and edit all your pending, delivered, and returned orders here.</p>

    {% if orders %}
      {% for order in orders %}
        <div class="card">
          <!-- order one -->
          <div class="col-sm-12 mb-5" id="card-body">
              <div class="card">
                  <div class="card-body">
                      <div style="display: flex; justify-content: space-between; align-items: center;">
                        <form id="trackerForm" action="" class="d-inline" method="post" style="visibility: hidden;">
                            {% csrf_token %}
                            <input type="hidden" name="prod_id" value="{{ order.product_id_number }}" id="prod_id">
                            <button style="border: 2px solid rgb(179, 179, 179); padding: 4px 8px; border-radius: 3px;" type="submit" class="btn shadow px-5 py-2"><i class="fas fa-map-marker-alt" style="color: rgb(2, 116, 238);"></i> Track</button>
                        </form>
                          <div class="" style="padding: 7px 10px; border: 2px solid rgb(0, 119, 255); border-radius: 5px;">{{ order.product_id_number }}</div>
                      </div>
                      <hr>
                      <div class="item">
                          <div class="text-center">
                              <a href="{% url 'productdetails' order.product.id %}">
                                  <img src="{{ order.product.image1.url }}" class="img-fluid img-thumbnail shadow-sm" height="150" width="150">
                              </a>
                          </div>
                          <div class="card_right">
                              <div class="detail col-sm-5">
                                  <div class="brand_name">{{ order.product.title }}</div>
                                  <div class="prodcut_price">
                                      <label for="quantity">Total Price:</label>&nbsp;
                                      <span class="selling_price"><strong><span>&#8377;</span>{{ order.price }}</strong><span><strong>0 /-</strong></span></span>
                                  </div>
                                  {% if order.offer %} 
                                      <div style="margin-top: 0;"><span style="color: black; font-weight: bold;">Offer </span> &nbsp; <span style="font-weight: bold; color: green;">{{order.offer}}<span style="font-weight: bold; color: green;">% off</span></span></div>
                                  {% endif %}
                                  <div style="margin-top: 4px;">
                                      <label for="quantity">Quantity:</label>&nbsp;
                                      <span id="quantity">{{ order.quantity }}</span>
                                  </div>
                              </div>
                              <div id="desktop" style="margin-left: 0;" class="detail col-sm-5 offset-1">
                                  {% if order.expected_delivery_date %}
                                      <div><span style="color: gray;">Delivery expected by</span>&nbsp; <strong>{{order.expected_delivery_date | date}}</strong></div>
                                  {% endif %}
                                  {% if order.payment_status %}
                                      <div><span style="color: gray;">Payment status </span>&nbsp; 
                                          <strong>
                                              {% if order.payment_status == 1%} 
                                              Success
                                              {% endif %}
                                          </strong>
                                      </div>
                                  {% endif %}
                                  {% if order.status == "Deliverd" %} 
                                      <div><span style="color: gray;">Download invoice</span> &nbsp; <a href="" style=" font-weight: bold;">invoice</a></div>
                                  {% endif %}
                                  <div class="fw-bold">
                                      <p>Order Status: {{ order.status }}</p>
                                      {% if order.status == "Pending" %}
                                      <div class="progress">
                                          <div class="progress-bar" role="progressbar" style="width: 0%;" aria-valuenow="0" aria-valuemax="100" aria-valuemin="0">
                                          </div>
                                      </div>
                                      {% endif %}
                                      {% if order.status == "Accepted" %}
                                      <div class="progress">
                                          <div class="progress-bar" role="progressbar" style="width: 20%;" aria-valuenow="20" aria-valuemax="100" aria-valuemin="0">
                                          </div>
                                      </div>
                                      {% endif %}
                                      {% if order.status == "Packed" %}
                                      <div class="progress">
                                          <div class="progress-bar bg-info" role="progressbar" style="width: 40%;" aria-valuenow="40" aria-valuemax="100" aria-valuemin="0">
                                          </div>
                                      </div>
                                      {% endif %}
                                      {% if order.status == "On The Way" %}
                                      <div class="progress">
                                          <div class="progress-bar bg-warning" role="progressbar" style="width: 70%;" aria-valuenow="70" aria-valuemax="100" aria-valuemin="0">
                                          </div>
                                      </div>
                                      {% endif %}
                                      {% if order.status == "Deliverd" %}
                                      <div class="progress">
                                          <div class="progress-bar bg-success" role="progressbar" style="width: 100%;" aria-valuenow="100" aria-valuemax="100" aria-valuemin="0">
                                          </div>
                                      </div>
                                      {% endif %}
                                      {% if order.status == "Cancelled" %}
                                      <div class="progress">
                                          <div class="progress-bar bg-danger" role="progressbar" style="width: 100%;" aria-valuenow="20" aria-valuemax="100" aria-valuemin="0">
                                          </div>
                                      </div>
                                      {% endif %}
                                  </div>
                              </div>
                          </div>
                      </div>
                      <div id="mobile" class="detail col-sm-12">
                          {% if order.expected_delivery_date %}
                              <div><span style="color: gray;">Delivery expected by</span>&nbsp; <strong>{{order.expected_delivery_date | date}}</strong></div>
                          {% endif %}
                          {% if order.payment_status %}
                              <div><span style="color: gray;">Payment status </span>&nbsp; 
                                  <strong>
                                      {% if order.payment_status == 1%} 
                                      Success
                                      {% endif %}
                                  </strong>
                              </div>
                          {% endif %}
                          {% if order.status == "Deliverd" %} 
                              <div><span style="color: gray;">Download invoice</span> &nbsp; <a href="" style=" font-weight: bold;">invoice</a></div>
                          {% endif %}
                          <div class="fw-bold">
                              <p>Order Status: {{ order.status }}</p>
                              {% if order.status == "Pending" %}
                              <div class="progress">
                                  <div class="progress-bar" role="progressbar" style="width: 0%;" aria-valuenow="0" aria-valuemax="100" aria-valuemin="0">
                                  </div>
                              </div>
                              {% endif %}
                              {% if order.status == "Accepted" %}
                              <div class="progress">
                                  <div class="progress-bar" role="progressbar" style="width: 20%;" aria-valuenow="20" aria-valuemax="100" aria-valuemin="0">
                                  </div>
                              </div>
                              {% endif %}
                              {% if order.status == "Packed" %}
                              <div class="progress">
                                  <div class="progress-bar bg-info" role="progressbar" style="width: 40%;" aria-valuenow="40" aria-valuemax="100" aria-valuemin="0">
                                  </div>
                              </div>
                              {% endif %}
                              {% if order.status == "On The Way" %}
                              <div class="progress">
                                  <div class="progress-bar bg-warning" role="progressbar" style="width: 70%;" aria-valuenow="70" aria-valuemax="100" aria-valuemin="0">
                                  </div>
                              </div>
                              {% endif %}
                              {% if order.status == "Deliverd" %}
                              <div class="progress">
                                  <div class="progress-bar bg-success" role="progressbar" style="width: 100%;" aria-valuenow="100" aria-valuemax="100" aria-valuemin="0">
                                  </div>
                              </div>
                              {% endif %}
                              {% if order.status == "Cancelled" %}
                              <div class="progress">
                                  <div class="progress-bar bg-danger" role="progressbar" style="width: 100%;" aria-valuenow="20" aria-valuemax="100" aria-valuemin="0">
                                  </div>
                              </div>
                              {% endif %}
                          </div>
                      </div>
                      <hr>
                      <div style="display: flex; justify-content: space-between;">
                          <div><span style="color: gray;">Ordered On</span>&nbsp; <strong>{{order.datetime_of_payment | date}}</strong></div>
                          <div><span style="color: gray;">Total Price</span>&nbsp; <strong><span>&#8377;</span>{{order.price}}<span><strong>0 /-</strong></span></strong></div>
                      </div>
                  </div>
              </div>
          </div>          
        </div>                          
      {% endfor %}
    {% else %}
      <p style="margin-top:20px; font-weight:bold;">You haven't placed any orders yet.</p>
    {% endif %}
  </div>
</div>


{% endblock content %}
{% block page_js %}



<script src="{% static 'js/jquery-3.2.1.min.js' %}"></script>
  <script src="{% static 'styles/bootstrap4/popper.js' %}"></script>
  <script src="{% static 'styles/bootstrap4/bootstrap.min.js' %}"></script>
  <script src="{% static 'plugins/OwlCarousel2-2.2.1/owl.carousel.js' %}"></script>
  <script src="{% static 'plugins/easing/easing.js' %}"></script>
  <script src="{% static 'plugins/parallax-js-master/parallax.min.js' %}"></script>
  <script src="{% static 'plugins/colorbox/jquery.colorbox-min.js' %}"></script>
  <script src="{% static 'js/custom.js' %}"></script>
  <script src="{% static 'script.js' %}"></script>

   <script>
    function trackOrder() {
      alert("Tracking order #RO374915036...");
    }

    function cancelOrder() {
      if (confirm("Are you sure you want to cancel the order?")) {
        alert("Your order has been canceled.");
      }
    }
  </script>

</body>
 {% endblock page_js %}
</html>
